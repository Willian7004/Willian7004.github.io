<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>文本编辑器的架构设计</title>
    <script src="../../libs/tailwindcss.js"></script>
    <link rel="stylesheet" href="../../libs/fontawesome.min.css">
    <script src="../../libs/chart.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #1e1e1e;
            color: #e6e6e6;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        .slide {
            width: 1280px;
            min-height: 720px;
            overflow: hidden;
            position: relative;
            background: linear-gradient(135deg, #1e1e1e 0%, #2d2d2d 100%);
            display: flex;
            flex-direction: column;
        }
        .highlight {
            color: #569cd6;
        }
        .highlight-green {
            color: #4ec9b0;
        }
        .highlight-yellow {
            color: #dcdcaa;
        }
        .highlight-purple {
            color: #c586c0;
        }
        .highlight-red {
            color: #ce9178;
        }
        .architecture-card {
            background-color: #252526;
            border-radius: 8px;
            transition: all 0.3s ease;
            height: 100%;
        }
        .architecture-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        .code-block {
            background-color: #252526;
            border-radius: 6px;
            padding: 0.75rem;
            font-size: 0.85rem;
            line-height: 1.5;
            border-left: 4px solid #569cd6;
        }
        .arrow {
            position: absolute;
            width: 0;
            height: 0;
            border-top: 10px solid transparent;
            border-bottom: 10px solid transparent;
            border-left: 15px solid #569cd6;
        }
        .arrow-right {
            border-left: 15px solid #4ec9b0;
        }
        .flow-line {
            position: absolute;
            background-color: #569cd6;
            z-index: 1;
        }
        .vertical-line {
            width: 3px;
            left: 50%;
            transform: translateX(-50%);
        }
        .horizontal-line {
            height: 3px;
        }
        .chart-container {
            position: relative;
            height: 180px;
            width: 100%;
        }
    </style>
</head>
<body>
    <div class="slide flex flex-col">
        <!-- Header with subtle gradient -->
        <div class="h-2 w-full bg-gradient-to-r from-blue-500 via-purple-500 to-green-500"></div>
        
        <!-- Main Content -->
        <div class="flex flex-col justify-start items-center flex-grow p-8">
            <h1 class="text-4xl font-bold mb-6 text-center">
                <span class="highlight">文本编辑器</span>的架构设计
            </h1>
            
            <!-- Architecture Diagram -->
            <div class="relative w-full h-48 mb-8">
                <!-- State Layer -->
                <div class="absolute top-0 left-0 right-0 h-20 flex justify-center">
                    <div class="architecture-card p-4 w-64 border-t-4 border-blue-500">
                        <div class="flex items-center justify-center">
                            <i class="fas fa-database text-3xl highlight mr-3"></i>
                            <h3 class="text-2xl font-bold highlight">State</h3>
                        </div>
                        <p class="text-center text-sm mt-2">编辑器某一时刻的完整状态表示</p>
                    </div>
                </div>
                
                <!-- Arrow Down -->
                <div class="absolute top-20 left-1/2 transform -translate-x-1/2">
                    <i class="fas fa-arrow-down text-2xl highlight"></i>
                </div>
                
                <!-- Model Layer -->
                <div class="absolute top-32 left-0 right-0 h-20 flex justify-center">
                    <div class="architecture-card p-4 w-64 border-t-4 border-purple-500">
                        <div class="flex items-center justify-center">
                            <i class="fas fa-cogs text-3xl highlight-purple mr-3"></i>
                            <h3 class="text-2xl font-bold highlight-purple">Model</h3>
                        </div>
                        <p class="text-center text-sm mt-2">提供API操作State，同步View</p>
                    </div>
                </div>
                
                <!-- Arrow Down -->
                <div class="absolute top-52 left-1/2 transform -translate-x-1/2">
                    <i class="fas fa-arrow-down text-2xl highlight-purple"></i>
                </div>
                
                <!-- View Layer -->
                <div class="absolute bottom-0 left-0 right-0 h-20 flex justify-center">
                    <div class="architecture-card p-4 w-64 border-t-4 border-green-500">
                        <div class="flex items-center justify-center">
                            <i class="fas fa-desktop text-3xl highlight-green mr-3"></i>
                            <h3 class="text-2xl font-bold highlight-green">View</h3>
                        </div>
                        <p class="text-center text-sm mt-2">用户界面与交互层</p>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-2 gap-8 w-full">
                <!-- Left Column: Architecture Details -->
                <div class="flex flex-col space-y-6">
                    <h2 class="text-2xl font-bold mb-2 highlight flex items-center">
                        <i class="fas fa-layer-group mr-3"></i>架构层次详解
                    </h2>
                    
                    <div class="architecture-card p-5 border-l-4 border-blue-500">
                        <h3 class="text-xl font-bold highlight flex items-center">
                            <i class="fas fa-database mr-2"></i>State 层
                        </h3>
                        <ul class="mt-3 space-y-2 text-sm">
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight"></i>
                                <span>存储编辑器完整状态，与视图一一映射</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight"></i>
                                <span>核心数据结构：字符串、树形结构等</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight"></i>
                                <span>版本管理：快照(Snapshot)与差异(Diff)</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="architecture-card p-5 border-l-4 border-purple-500">
                        <h3 class="text-xl font-bold highlight-purple flex items-center">
                            <i class="fas fa-cogs mr-2"></i>Model 层
                        </h3>
                        <ul class="mt-3 space-y-2 text-sm">
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-purple"></i>
                                <span>向下：提供API修改State</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-purple"></i>
                                <span>向上：向View暴露State，处理变化</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-purple"></i>
                                <span>实现命令模式，支持撤销/重做</span>
                            </li>
                        </ul>
                    </div>
                    
                    <div class="architecture-card p-5 border-l-4 border-green-500">
                        <h3 class="text-xl font-bold highlight-green flex items-center">
                            <i class="fas fa-desktop mr-2"></i>View 层
                        </h3>
                        <ul class="mt-3 space-y-2 text-sm">
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-green"></i>
                                <span>将State映射为可视化界面</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-green"></i>
                                <span>处理用户交互，转化为Model API调用</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-angle-right mt-1 mr-2 highlight-green"></i>
                                <span>关注模块化、复用性和可扩展性</span>
                            </li>
                        </ul>
                    </div>
                </div>
                
                <!-- Right Column: Version Management -->
                <div class="flex flex-col space-y-6">
                    <h2 class="text-2xl font-bold mb-2 highlight-yellow flex items-center">
                        <i class="fas fa-history mr-3"></i>版本管理实现
                    </h2>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="architecture-card p-5 border-l-4 border-yellow-500">
                            <h3 class="text-xl font-bold highlight-yellow flex items-center">
                                <i class="fas fa-camera mr-2"></i>快照(Snapshot)
                            </h3>
                            <ul class="mt-3 space-y-2 text-sm">
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-yellow"></i>
                                    <span>存储完整状态副本</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-yellow"></i>
                                    <span>实现简单，稳定性高</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-yellow"></i>
                                    <span>内存占用大</span>
                                </li>
                            </ul>
                        </div>
                        
                        <div class="architecture-card p-5 border-l-4 border-red-500">
                            <h3 class="text-xl font-bold highlight-red flex items-center">
                                <i class="fas fa-code-branch mr-2"></i>差异(Diff)
                            </h3>
                            <ul class="mt-3 space-y-2 text-sm">
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-red"></i>
                                    <span>存储状态变化</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-red"></i>
                                    <span>节省存储空间</span>
                                </li>
                                <li class="flex items-start">
                                    <i class="fas fa-angle-right mt-1 mr-2 highlight-red"></i>
                                    <span>计算复杂度高</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="architecture-card p-5 border-l-4 border-blue-500">
                        <h3 class="text-xl font-bold highlight flex items-center">
                            <i class="fas fa-code mr-2"></i>最佳实践
                        </h3>
                        <div class="mt-3 text-sm">
                            <p class="mb-2"><i class="fas fa-check-circle mr-2 highlight-green"></i>版本存储：使用快照(Snapshot)</p>
                            <p class="mb-2"><i class="fas fa-check-circle mr-2 highlight-green"></i>实时同步：使用差异(Diff)</p>
                            <p><i class="fas fa-check-circle mr-2 highlight-green"></i>大型文档：混合策略，定期创建快照</p>
                        </div>
                    </div>
                    
                    <div class="architecture-card p-5 border-l-4 border-purple-500">
                        <h3 class="text-xl font-bold highlight-purple mb-3">版本管理比较</h3>
                        <div class="chart-container">
                            <canvas id="versionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="p-4 flex justify-between items-center bg-opacity-20 bg-black">
            <div class="text-sm opacity-70">文本编辑器实现原理</div>
            <div class="text-sm opacity-70">第3页 / 共6页</div>
        </div>
    </div>
    
    <script>
        // 初始化图表
        document.addEventListener('DOMContentLoaded', function() {
            const ctx = document.getElementById('versionChart').getContext('2d');
            const versionChart = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['内存占用', '存储效率', '计算复杂度', '实现难度', '恢复速度'],
                    datasets: [
                        {
                            label: '快照(Snapshot)',
                            data: [20, 30, 80, 90, 95],
                            backgroundColor: 'rgba(75, 192, 192, 0.2)',
                            borderColor: 'rgba(75, 192, 192, 1)',
                            pointBackgroundColor: 'rgba(75, 192, 192, 1)'
                        },
                        {
                            label: '差异(Diff)',
                            data: [90, 85, 40, 50, 60],
                            backgroundColor: 'rgba(153, 102, 255, 0.2)',
                            borderColor: 'rgba(153, 102, 255, 1)',
                            pointBackgroundColor: 'rgba(153, 102, 255, 1)'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        r: {
                            angleLines: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.2)'
                            },
                            pointLabels: {
                                color: '#e6e6e6',
                                font: {
                                    size: 10
                                }
                            },
                            ticks: {
                                backdropColor: 'transparent',
                                color: '#e6e6e6'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: '#e6e6e6',
                                font: {
                                    size: 10
                                }
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>